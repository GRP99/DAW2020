extends layout

block content
    #df.w3-card-4.modal
    #display.w3-card-4.modal
    div(class="sidenav" id="useraboutme")
        h3(style="text-align:center; color: #064579; font-weight: bold;") ABOUT ME
        if path == 0
            img(src="https://www.inmosenna.com/wp-content/uploads/2018/07/avatar-user-business-man-399587fe24739d5a-512x512-300x300.png" alt="User" style="width:120px; height:120px; object-fit: cover; margin-left:10px")
        else 
            img(src="http://localhost:3001/users/"+user_id+"/profilepic.jpeg?token="+token, alt="UserI" style="width:120px; height:120px; border-radius: 30%;  object-fit: cover; margin-left:10px")
        button(type='button' onclick="mudafoto(\"" + user_id + "\",\"" + token +"\");" style="margin-left:130px")
            i(class="fa fa-gear")   Alterar foto
        dl
            dt 
                b Nome:
            dd= user_name 
            dt 
                b Email de Contacto:
            dd= user_mail
    div(style='margin:50px 50px 10px 270px; padding:8px; border: 1px solid black;') 
        table.w3-table.w3-bordered
            tr
                th Date
                th File
                th Type
                th Size
                th Security Mode
                th
            each a in lista
                tr
                    td= a.date
                    td(onclick="showFile(\""+a.name+"\",\""+a.mimetype+"\",\""+a.autor+"\",\""+a.descricao+",\""+token+"\");")= a.name
                    td= a.mimetype
                    td= a.size
                    if a.privacy == 1
                        td
                            //(onclick="mudarprivacidade(\""+a._id+"\",\""+a.autor+"\");" style="text-decoration: underline;")
                            b Privado  
                            //i(class="fa fa-lock") 
                            a(href="http://localhost:3002/files/changeprivacy/"+a._id+'?token='+token, class="fa fa-lock")
                    else 
                        td
                            //(onclick="mudarprivacidade(\""+a._id+"\",\""+a.autor+"\");" style="text-decoration: underline;")
                            b Público  
                            //i(class="fa fa-lock")
                            a(href="http://localhost:3002/files/changeprivacy/"+a._id+'?token='+token, class="fa fa-unlock")
                    td
                        button(class="w3-button w3-green" onclick="showFile(\""+a._id+"\",\""+a.mimetype+"\",\""+a.autor+"\",\""+a.descricao+"\");")
                            i(class="fa fa-download" style="font-size:15px")        
                    td
                        a(href="http://localhost:3002/files/delete/"+a._id+"?token="+token) 
                            button(class="w3-button w3-red" onclick='return confirm("Do you want to delete this file?")')
                                i(class="fa fa-trash" style="font-size:15px")

    div(style='margin:10px 50px 25px 270px; padding:8px; border: 1px solid black;') 
        .w3-container.w3-blue-grey
            h4 UPLOAD
        form.w3-container(onSubmit='return confirm("Do you want to submit?")' action='http://localhost:3001/files?token='+token method='POST' enctype='multipart/form-data' id='myForm')
            label.w3-text-blue-grey
                b Select file
            // #addeds
            input.w3-input.w3-border.w3-light-grey(type='file' name='myFile')
            table
                tr
                    td Descrição:
                    td
                        textarea(rows='3' cols='80' name='descricao')
            // button.w3-btn.w3-teal(type='button' onclick='add()') +
            input(type='hidden' name='autor' value=""+user_id)
            input.w3-btn.w3-blue-grey(type='submit' value='Submit' id='addFile')
    script(type='text/javascript').
        function preventBack() { window.history.forward(); }
        setTimeout("preventBack()", 0);
        window.onunload = function () { null };  
    footer.w3-container.w3-blue-grey.footer(style="text-align:right")
        pre
            a(href="http://localhost:3002/files/biblioteca?token="+token)
                i(class="fa fa-search" style="font-size:16px")      
            a(href="/users?token="+token)
                i(class="fa fa-user" style="font-size:16px")      
            a(href="/users/logout?token="+token onclick="preventBack()")
                i(class="fa fa-power-off" style="font-size:16px")      

